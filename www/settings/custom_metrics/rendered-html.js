// fix up that output in case there are style elements with cssom rules not in the source
// this often happens with dynamic stylesheet frameworks
let styles = document.querySelectorAll("style").forEach((style) => {
  if (style.textContent.trim()) {
    // there's something inside the <style>
    // assume it's not generated by CSSOM API
    return;
  }
  let thisText = "";
  for (let i in style.sheet.cssRules) {
    if (style.sheet.cssRules[i] && style.sheet.cssRules[i].cssText) {
      thisText += style.sheet.cssRules[i].cssText + "\n";
    }
  }
  if (thisText) {
    style.textContent =
      "\n/* inner styles set by WPT to match CSSOM */\n" + thisText;
  }
});
return document.documentElement.outerHTML;